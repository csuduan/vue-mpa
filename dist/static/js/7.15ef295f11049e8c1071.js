webpackJsonp([7],{"9FpE":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("mtWM"),s=i.n(a),n={data:function(){return{value:"# 请开始你的表演",tags:[],content:"",visible2:!1,dialogTableVisible:!1,dialogTableVisible2:!1,inputValue:"",inputVisible:!1,form:{title:"",tag:"",describtion:""},formLabelWidth:"120px"}},mounted:function(){this.getTags()},methods:{getContent:function(t,e){this.content=t},imgAdd:function(t,e){var i=this;(new FormData).append("image",e),s.a.post("/api/imgAdd",{image:e}).then(function(e){i.$refs.md.$img2Url(t,e.data)})},subArticle:function(){var t=this;this.form.title?this.content?s.a.post("/api/articleSub",{title:this.form.title,tag:this.form.tag,describtion:this.form.describtion,content:this.content}).then(function(e){"0"==e.data.status?(t.$message({type:"success",message:"文章已发布"}),t.visible2=!1):t.$message.error("未发布")}):this.$message.error("无内容"):this.$message.error("无标题")},getTags:function(){var t=this;s.a.get("/api/tags").then(function(e){var i=e.data;"0"==i.status?t.tags=i.result.list:t.tags=[]})},handleClose:function(t){var e=this;this.tags.splice(this.tags.indexOf(t.name),1),s.a.post("/api/tagsDelete",{tagDel:t}).then(function(t){"0"==t.data.status?e.$message({type:"success",message:"标签已删除"}):e.$message.error("未删除")})},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var t=this,e=this.inputValue;e&&(this.tags.push({name:e}),s.a.post("/api/tagsAdd",{tagAdd:e}).then(function(e){"0"==e.data.status?t.$message({type:"success",message:"标签已添加"}):t.$message.error("未添加")})),this.inputVisible=!1,this.inputValue=""}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"admin-container"},[i("mavon-editor",{ref:"md",staticClass:"set",attrs:{ishljs:!0},on:{imgAdd:t.imgAdd,change:t.getContent},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),i("div",{staticClass:"footer"},[i("el-popover",{ref:"popover5",attrs:{placement:"top",width:"160"},model:{value:t.visible2,callback:function(e){t.visible2=e},expression:"visible2"}},[i("p",[t._v("确定提交吗？")]),t._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.visible2=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.subArticle}},[t._v("确定")])],1)]),t._v(" "),i("el-button",{directives:[{name:"popover",rawName:"v-popover:popover5",arg:"popover5"}],staticClass:"submit"},[t._v("发布")]),t._v(" "),i("div",{staticClass:"left"},[i("el-button",{on:{click:function(e){t.dialogTableVisible=!0}}},[t._v("填写信息")]),t._v(" "),i("el-button",{on:{click:function(e){t.dialogTableVisible2=!0}}},[t._v("添加分类")])],1)],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"文章信息",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[i("el-form",{attrs:{model:t.form}},[i("el-form-item",{attrs:{label:"文章标题","label-width":t.formLabelWidth}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"文章标签","label-width":t.formLabelWidth}},[i("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.tag,callback:function(e){t.$set(t.form,"tag",e)},expression:"form.tag"}},t._l(t.tags,function(t){return i("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"文章描述","label-width":t.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.describtion,callback:function(e){t.$set(t.form,"describtion",e)},expression:"form.describtion"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"标签分类",visible:t.dialogTableVisible2,id:"tags"},on:{"update:visible":function(e){t.dialogTableVisible2=e}}},[t._l(t.tags,function(e){return i("el-tag",{key:e.name,attrs:{closable:!0,"close-transition":!1},on:{close:function(i){t.handleClose(e.name)}}},[t._v("\n    "+t._s(e.name)+"\n    ")])}),t._v(" "),t.inputVisible?i("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"mini"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleInputConfirm(e):null}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")]),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogTableVisible2=!1}}},[t._v("确 定")])],1)],2)],1)},staticRenderFns:[]};var o=i("VU/8")(n,l,!1,function(t){i("mt2Y")},null,null);e.default=o.exports},mt2Y:function(t,e){}});
//# sourceMappingURL=7.15ef295f11049e8c1071.js.map